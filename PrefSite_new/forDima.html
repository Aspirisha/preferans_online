<pre class="cpp" style="font-family:monospace;"><span style="color: #0000ff;">void</span> ProblemManager<span style="color: #008080;">::</span><span style="color: #007788;">copyProblems</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">const</span> QStringList <span style="color: #000040;">&amp;</span>problemsNames,
                                  <span style="color: #0000ff;">const</span> QString <span style="color: #000040;">&amp;</span>srcProblemsTable, <span style="color: #0000ff;">const</span> QString <span style="color: #000040;">&amp;</span>destProblemsTable,
                                  <span style="color: #0000ff;">const</span> QString <span style="color: #000040;">&amp;</span>srcSolutionsTable, <span style="color: #0000ff;">const</span> QString <span style="color: #000040;">&amp;</span>destSolutionsTable<span style="color: #008000;">&#41;</span>
<span style="color: #008000;">&#123;</span>
  QSqlQuery query<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;&quot;</span>, connectionWidget<span style="color: #000040;">-</span><span style="color: #000080;">&gt;</span>currentDatabase<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
  QSqlQuery query2<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;&quot;</span>, connectionWidget<span style="color: #000040;">-</span><span style="color: #000080;">&gt;</span>currentDatabase<span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
  <span style="color: #0000ff;">for</span> <span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span> i <span style="color: #000080;">=</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span> i <span style="color: #000080;">&lt;</span> problemsNames.<span style="color: #007788;">count</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span> <span style="color: #000040;">++</span>i<span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
      QString queryString <span style="color: #000080;">=</span> QString<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;INSERT INTO %1 (typeId, problemName, problemDescription, problemText, problemLeftPart, problemRightPart, varNames, &quot;</span>
                                    <span style="color: #FF0000;">&quot;initialConditions, isParsed)&quot;</span>
                                    <span style="color: #FF0000;">&quot; SELECT typeId, problemName, problemDescription, problemText, problemLeftPart, &quot;</span>
                                    <span style="color: #FF0000;">&quot;problemRightPart, varNames, initialConditions, isParsed FROM %2 WHERE problemName = :name&quot;</span><span style="color: #008000;">&#41;</span>
                                    .<span style="color: #007788;">arg</span><span style="color: #008000;">&#40;</span>destProblemsTable, srcProblemsTable<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">prepare</span><span style="color: #008000;">&#40;</span>queryString<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:name&quot;</span>, problemsNames<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">exec</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      <span style="color: #0000ff;">int</span> id <span style="color: #000080;">=</span> ProblemManager<span style="color: #008080;">::</span><span style="color: #007788;">getProblemId</span><span style="color: #008000;">&#40;</span>problemsNames<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>, srcProblemsTable<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      queryString <span style="color: #000080;">=</span> QString<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;SELECT problemSolution, methodId, errorLevel FROM %1 WHERE problemId = :id&quot;</span><span style="color: #008000;">&#41;</span>.<span style="color: #007788;">arg</span><span style="color: #008000;">&#40;</span>srcSolutionsTable<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">prepare</span><span style="color: #008000;">&#40;</span>queryString<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:id&quot;</span>, id<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      query.<span style="color: #007788;">exec</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
&nbsp;
      <span style="color: #0000ff;">int</span> newId <span style="color: #000080;">=</span> ProblemManager<span style="color: #008080;">::</span><span style="color: #007788;">getProblemId</span><span style="color: #008000;">&#40;</span>problemsNames<span style="color: #008000;">&#91;</span>i<span style="color: #008000;">&#93;</span>, destProblemsTable<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      <span style="color: #0000ff;">while</span> <span style="color: #008000;">&#40;</span>query.<span style="color: #007788;">next</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span> <span style="color: #008000;">&#123;</span>
          queryString <span style="color: #000080;">=</span> QString<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;INSERT INTO %1 (problemId, problemSolution, methodId, errorLevel)  VALUES (:pId, :pSol, :methId, :eLevel)&quot;</span><span style="color: #008000;">&#41;</span>.<span style="color: #007788;">arg</span><span style="color: #008000;">&#40;</span>destSolutionsTable<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">prepare</span><span style="color: #008000;">&#40;</span>queryString<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:pId&quot;</span>, newId<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:pSol&quot;</span>, query.<span style="color: #007788;">value</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span>.<span style="color: #007788;">toString</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:pmethId&quot;</span>, query.<span style="color: #007788;">value</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">1</span><span style="color: #008000;">&#41;</span>.<span style="color: #007788;">toString</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">bindValue</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;:eLevel&quot;</span>, query.<span style="color: #007788;">value</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">2</span><span style="color: #008000;">&#41;</span>.<span style="color: #007788;">toBool</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
          query2.<span style="color: #007788;">exec</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
      <span style="color: #008000;">&#125;</span>
&nbsp;
  <span style="color: #008000;">&#125;</span>
<span style="color: #008000;">&#125;</span></pre>